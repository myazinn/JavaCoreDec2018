package t01;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class PenTest {

    Pen purpleGelPen = new Pen("Purple", "gel");
    Pen redGelPen = new Pen(Colors.RED, PenTypes.GEL);
    Pen purpleClone = new Pen(purpleGelPen);


    @Test
    void writeTest() {
        while (redGelPen.getInkRemain() > 10) {
            try {
                redGelPen.write("foo bar buzz");
            } catch (EmptyPenException exc){}
        }
        assertThrows(EmptyPenException.class, () -> redGelPen.write("this is failure"));

    }

    @Test
    void equalsTest() {
        try {
            purpleGelPen.write("foo");
            purpleClone.write("bar");
        } catch (EmptyPenException exc){}

        assertTrue(purpleGelPen.equals(purpleClone) && purpleClone.equals(purpleGelPen));
        assertTrue(purpleClone.equals(purpleClone));
        assertFalse(purpleGelPen.equals(redGelPen));
    }

    @Test
    void hashCodeTest() {
        assertEquals(purpleGelPen.hashCode(), purpleClone.hashCode());
        try {
            purpleGelPen.write("foo");
            purpleClone.write("bar");
        } catch (EmptyPenException exc){}
        assertTrue(purpleGelPen.equals(purpleClone));
        assertEquals(purpleGelPen.hashCode(), purpleClone.hashCode());

        assertNotEquals(purpleGelPen.hashCode(), redGelPen.hashCode());
    }
}